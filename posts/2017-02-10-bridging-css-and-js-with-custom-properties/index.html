<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Bridging CSS and JS with Custom Properties</title>
  <meta name="description" content="I’m Sérgio, and I work at Web Developer Relations at Google, helping developers make the web a better place.">

    <!--
      Hello, and welcome to the source for my site!
      There's not a lot to see around here, but I hope you get some inspiration/ideas/laughs.

      Here's an ASCII art stick figure saying hi:  o/
                                                  /|
                                                  / \
    -->

  <link rel="canonical" href="https://sgom.es/">
  <link rel="alternate" type="application/rss+xml" title="sgom.es" href="/feed.xml">

  <link rel="manifest" href="/manifest.json">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="sgom.es">
  <link rel="icon" sizes="16x16" href="/assets/images/touch/16x16.png">
  <link rel="icon" sizes="32x32" href="/assets/images/touch/32x32.png">
  <link rel="icon" sizes="192x192" href="/assets/images/touch/192x192.png">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="sgom.es">
  <link rel="apple-touch-icon" href="/assets/images/touch/152x152.png">

  <meta name="msapplication-TileImage" content="/assets/images/touch/144x144.png">
  <meta name="msapplication-TileColor" content="#009688">

  <meta name="theme-color" content="#009688">

  <style>
  @font-face{font-display:fallback;font-family:'Roboto';font-style:normal;font-weight:400;src:local("Roboto"),local("Roboto-Regular"),url(/assets/fonts/oMMgfZMQthOryQo9n22dcuvvDin1pK8aKteLpeZ5c0A.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:'Roboto';font-style:normal;font-weight:500;src:local("Roboto Medium"),local("Roboto-Medium"),url(/assets/fonts/RxZJdnzeo3R5zSexge8UUZBw1xU1rKptJj_0jans920.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:'Roboto';font-style:normal;font-weight:700;src:local("Roboto Bold"),local("Roboto-Bold"),url(/assets/fonts/d-6IYplOFocCacKzxwXSOJBw1xU1rKptJj_0jans920.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:'Roboto';font-style:italic;font-weight:400;src:local("Roboto Italic"),local("Roboto-Italic"),url(/assets/fonts/vPcynSL0qHq_6dX7lKVByXYhjbSpvc47ee6xR_80Hnw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:'Roboto';font-style:italic;font-weight:500;src:local("Roboto Medium Italic"),local("Roboto-MediumItalic"),url(/assets/fonts/OLffGBTaF0XFOW1gnuHF0Ygp9Q8gbYrhqGlRav_IXfk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;src:local("Roboto Mono"),local("RobotoMono-Regular"),url(/assets/fonts/hMqPNLsu_dywMa4C_DEpY4gp9Q8gbYrhqGlRav_IXfk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}.mdc-button{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;letter-spacing:.04em;line-height:1.5rem;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-light,rgba(0,0,0,.87));display:inline-block;position:relative;min-width:64px;height:36px;padding:0 16px;border:none;border-radius:2px;outline:none;background:0 0;font-size:14px;font-weight:500;line-height:36px;text-align:center;text-transform:uppercase;vertical-align:middle;box-sizing:border-box;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.mdc-button--theme-dark,.mdc-theme--dark .mdc-button{color:#fff;color:var(--mdc-theme-text-primary-on-dark,#fff)}.mdc-button::before{position:absolute;top:0;left:0;width:100%;height:100%;transition:opacity 120ms 0ms cubic-bezier(.4,0,1,1);border-radius:inherit;background:currentColor;content:"";opacity:0}.mdc-button:focus::before{transition:opacity 120ms 0ms cubic-bezier(0,0,.2,1);opacity:.12}.mdc-button:active::before{transition:opacity 120ms 0ms cubic-bezier(0,0,.2,1);opacity:.18}.mdc-button:focus:active::before{transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button--dense{height:32px;font-size:.8125rem;line-height:32px}.mdc-button--raised{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);will-change:box-shadow;min-width:88px}.mdc-button--raised:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mdc-button--theme-dark .mdc-button--raised,.mdc-theme--dark .mdc-button--raised{background-color:#009688;background-color:var(--mdc-theme-primary,#009688)}.mdc-button--accent.mdc-button--raised::before,.mdc-button--primary.mdc-button--raised::before,.mdc-button--theme-dark .mdc-button--raised::before,.mdc-theme--dark .mdc-button--raised::before{color:#000}.mdc-button--primary,.mdc-button--theme-dark .mdc-button--primary,.mdc-theme--dark .mdc-button--primary{color:#009688;color:var(--mdc-theme-primary,#009688)}.mdc-button--primary.mdc-button--raised{background-color:#009688;background-color:var(--mdc-theme-primary,#009688);color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff)}.mdc-button--accent,.mdc-button--theme-dark .mdc-button--accent,.mdc-theme--dark .mdc-button--accent{color:#ffab40;color:var(--mdc-theme-accent,#ffab40)}.mdc-button--accent.mdc-button--raised{background-color:#ffab40;background-color:var(--mdc-theme-accent,#ffab40);color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-accent,rgba(0,0,0,.87))}.mdc-button--compact{padding:0 8px}.mdc-button:disabled,fieldset:disabled .mdc-button{color:rgba(0,0,0,.26);cursor:default;pointer-events:none}.mdc-button--theme-dark .mdc-button:disabled,.mdc-button--theme-dark fieldset:disabled .mdc-button,.mdc-theme--dark .mdc-button:disabled,.mdc-theme--dark fieldset:disabled .mdc-button{color:rgba(255,255,255,.3)}.mdc-button--raised:disabled,fieldset:disabled .mdc-button--raised{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);background-color:rgba(0,0,0,.12);pointer-events:none}.mdc-button--theme-dark .mdc-button--raised:disabled,.mdc-button--theme-dark fieldset:disabled .mdc-button--raised,.mdc-theme--dark .mdc-button--raised:disabled,.mdc-theme--dark fieldset:disabled .mdc-button--raised{background-color:rgba(255,255,255,.12)}.header{display:flex;height:80px;background:#009688;color:#fff;justify-content:center;align-items:center;flex-shrink:0;z-index:2;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.header-title{text-decoration:none;color:#fff;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:2.125rem;letter-spacing:normal;line-height:2.5rem;margin:-.5rem 0 4rem -.07em;font-weight:700}.header-title:hover,.header-title:visited{color:#fff}.post{background:#fff;padding:48px 24px;margin:0 auto;color:rgba(0,0,0,.87);width:100%;max-width:45rem;box-sizing:border-box}.post-meta,.post-title{display:block;color:#009688;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.post-title{margin:-.5rem 0 1rem -.06em;font-size:1.5rem;letter-spacing:normal;line-height:2rem;font-weight:700;margin-bottom:0}.post-meta{font-size:.875rem;font-weight:500;letter-spacing:.04em;line-height:1.5rem;margin-bottom:16px}.post-tags{display:inline-block;flex-grow:1;font-family:'Roboto Mono',monospace;letter-spacing:normal}.post-image{display:block;max-width:100%;margin:0 auto}.post-content,.post-content h1{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.post-content{line-height:1.25rem;font-size:1rem}.post-content,.post-content h1,.post-content pre{font-weight:400;letter-spacing:normal}.post-content h1{font-size:1.5rem;line-height:2rem}.post-content h2,.post-content h3{letter-spacing:.02em;line-height:2rem}.post-content figcaption,.post-content h2,.post-content h3,.post-content h4,.post-content strong{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-weight:500}.post-content h2{margin-top:2rem;font-size:1.25rem}.post-content figcaption,.post-content h3,.post-content h4,.post-content strong{font-size:1rem}.post-content h3{color:rgba(0,0,0,.7)}.post-content figcaption,.post-content h4,.post-content strong{line-height:1.5rem;letter-spacing:normal}.post-content a,.post-content a:hover,.post-content a:visited{color:#00bfa5}.post-content code,.post-content pre{font-size:.9375rem;font-family:'Roboto Mono',monospace}.post-content pre{border-radius:2px;margin:0;padding:16px;font-style:normal;line-height:normal;overflow-x:auto;background:#f5f5f5}.post-content code{color:#0d47a1}.post-content figure{max-width:100%;box-sizing:border-box}.post-content figcaption{text-align:center;font-size:.75rem;font-weight:400;letter-spacing:.08em;line-height:1.25rem}.post-content blockquote{margin:2em 2.5em 3em}.post-content table{margin:2rem 0;border-collapse:collapse;text-align:center}.post-content table td,.post-content table th{padding:8px;border:1px solid #ddd}.post-content .overflow-x{overflow-x:auto}.home,.home-post-list{padding:24px 0;box-sizing:border-box}.home-post-list{list-style:none;padding:0 8px;margin:0 auto;width:100%;max-width:45rem}.home-post-entry,.home-post-title{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.home-post-entry{background:#fff;padding:16px;box-sizing:border-box;width:100%;border-radius:2px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-size:.875rem;font-weight:400;letter-spacing:.04em;line-height:1.25rem}.home-post-entry+.home-post-entry,.post-content pre+pre{margin-top:16px}.home-post-title{display:inline;padding-right:4px;font-size:1.5rem;letter-spacing:normal;line-height:2rem;margin:-.5rem 0 1rem -.06em;font-weight:700}.footer-copyright a,.home-post-title>a{text-decoration:none;color:#009688}.home-post-title>a:hover,.home-post-title>a:visited{color:#009688}.home-post-meta{display:inline-block;margin-bottom:0}.home-post-excerpt{margin:8px 0 0;color:rgba(0,0,0,.87);font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-weight:400;line-height:1.25rem;font-size:1rem;letter-spacing:normal}.home-post-bottom{display:flex;flex-flow:row;padding-top:16px}.home-pagination{display:flex;flex-flow:row nowrap;padding:16px 8px;box-sizing:border-box;margin:0 auto;width:100%;max-width:45rem}.home-page-previous{margin-right:auto}.home-page-next{margin-left:auto}.footer,.footer-contents{display:flex;flex-shrink:0;box-sizing:border-box;width:100%}.footer{background-color:#009688;color:#fff;z-index:2;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);flex-flow:column nowrap;padding:16px}.footer-contents{position:relative;flex-flow:row nowrap;justify-content:center;align-items:center;margin:0 auto;padding:0 24px;max-width:45rem}@media (max-width:600px){.footer-contents{flex-wrap:wrap;padding:0}}.footer-avatar{border-radius:10%;width:100px;height:100px;background:#000;flex-grow:0;flex-shrink:0;margin-right:16px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.footer-text{flex-grow:1;flex-shrink:1;padding:16px;width:50%}.footer-heading{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:.02em;line-height:2rem;margin:-.5rem 0 1rem -.05em;margin-bottom:8px}.footer-description{margin:0}.footer-icons,.footer-icons-row{display:block;flex-shrink:0}@media (max-width:600px){.footer-icons-row{display:inline-block}}.footer-bubble{display:inline-block;border-radius:50%;height:40px;width:40px;flex-shrink:0;margin:2px;background-repeat:no-repeat;background-size:contain;background-position:center}.footer-twitter{background-image:url(/assets/images/twitter.svg)}.footer-github{border-radius:0;background-image:url(/assets/images/github.svg)}.footer-email{background-image:url(/assets/images/email.svg)}.footer-feed{background-image:url(/assets/images/feed.svg)}.footer-bottom{display:flex;position:relative;justify-content:center;margin:8px auto 0;flex-shrink:0;width:100%;max-width:45rem}.footer-bottom::before{display:block;position:absolute;top:50%;width:100%;height:1px;background:rgba(255,255,255,.17);content:''}.footer-copyright,body,html{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.footer-copyright{display:inline-block;text-align:center;background:#009688;z-index:2;font-size:.75rem;font-weight:400;letter-spacing:.08em;line-height:1.25rem;padding:0 8px}.footer-copyright a{color:#fff;font-weight:700}.footer-copyright a:hover,.footer-copyright a:visited{color:#fff}.post-content pre code{color:rgba(0,0,0,.87)}.post-content pre code .comment,.post-content pre code .comment .markup.link{color:#616161}.post-content pre code .entity.name.type{color:#3e2723}.post-content pre code .entity.other.inherited-class{color:#1b5e20}.post-content pre code .keyword,.post-content pre code .keyword.control,.post-content pre code .storage{color:#4a148c}.post-content pre code .keyword.operator{color:rgba(0,0,0,.87)}.post-content pre code .keyword.other.special-method{color:#0d47a1}.post-content pre code .constant,.post-content pre code .constant.numeric,.post-content pre code .keyword.other.unit{color:#e65100}.post-content pre code .constant.character.escape,.post-content pre code .constant.other.color{color:#006064}.post-content pre code .constant.other.symbol{color:#1b5e20}.post-content pre code .variable{color:#b71c1c}.post-content pre code .string.regexp .source.ruby.embedded,.post-content pre code .variable.interpolation{color:#3e2723}.post-content pre code .variable.parameter.function{color:rgba(0,0,0,.87)}.post-content pre code .invalid.illegal{background-color:#b71c1c;color:#f5f5f5}.post-content pre code .string{color:#1b5e20}.post-content pre code .string.regexp{color:#006064}.post-content pre code .string.other.link{color:#b71c1c}.post-content pre code .punctuation.definition.array,.post-content pre code .punctuation.definition.parameters{color:rgba(0,0,0,.87)}.post-content pre code .punctuation.definition.heading,.post-content pre code .punctuation.definition.identity{color:#0d47a1}.post-content pre code .punctuation.definition.bold{color:#3e2723;font-weight:700}.post-content pre code .punctuation.definition.italic{color:#4a148c;font-style:italic}.post-content pre code .punctuation.section.embedded,.post-content pre code .support.class{color:#3e2723}.post-content pre code .punctuation.section.class,.post-content pre code .punctuation.section.inner-class,.post-content pre code .punctuation.section.method{color:rgba(0,0,0,.87)}.post-content pre code .support.function{color:#006064}.post-content pre code .entity.name.function,.post-content pre code .support.function.any-method{color:#0d47a1}.post-content pre code .entity.name.class,.post-content pre code .entity.name.type.class,.post-content pre code .meta.class{color:#3e2723}.post-content pre code .entity.name.section,.post-content pre code .entity.other.attribute-name.id{color:#0d47a1}.post-content pre code .entity.name.tag{color:#b71c1c}.post-content pre code .entity.other.attribute-name,.post-content pre code .meta.link{color:#e65100}.post-content pre code .meta.class.body,.post-content pre code .meta.method,.post-content pre code .meta.method-call{color:rgba(0,0,0,.87)}.post-content pre code .markup.heading .punctuation.definition.heading,.post-content pre code .meta.require{color:#0d47a1}.post-content pre code .meta.selector{color:#4a148c}.post-content pre code .meta.separator{background-color:#373b41;color:rgba(0,0,0,.87)}.post-content pre code .meta.tag,.post-content pre code .none{color:rgba(0,0,0,.87)}.post-content pre code .markup.bold{color:#e65100;font-weight:700}.post-content pre code .markup.changed{color:#4a148c}.post-content pre code .markup.deleted{color:#b71c1c}.post-content pre code .markup.italic{color:#4a148c;font-style:italic}.post-content pre code .markup.heading{color:#b71c1c}.post-content pre code .markup.link{color:#0d47a1}.post-content pre code .markup.inserted{color:#1b5e20}.post-content pre code .markup.quote{color:#e65100}.post-content pre code .markup.raw{color:#1b5e20}.post-content pre code .source.gfm .markup{-webkit-font-smoothing:auto}.post-content pre code .source.gfm .link .entity{color:#006064}body,html{display:flex;flex-direction:column;margin:0;padding:0;box-sizing:border-box;height:100%}.site-content{flex-grow:1;background:#eceff1}.mdc-button{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-decoration:none}
  </style>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90468985-1', 'auto');
  ga('send', 'pageview');

</script>

  
</head>


  <body>

    <header class="header" role="banner">
<div>
  <a class="header-title" href="/">sgom.es</a>
  <!-- No, I'm not Spanish. I just like short domain names. -->
</div>
</header>


    <main class="site-content" aria-label="Content">
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Bridging CSS and JS with Custom Properties</h1>
    <time class="post-meta" datetime="2017-02-10T16:00:00+00:00" itemprop="datePublished">(2017-02-10)</time>
  </header>

  <div class="post-content" itemprop="articleBody">
    
<p>CSS Custom Properties have many interesting uses beyond serving as a simple storage and retrieval mechanism for CSS values. In this article, we will explore the best practices around using them as a bridge between CSS and JavaScript.</p>
<h2 id="keeping-css-and-javascript-isolated-with-css-classes">Keeping CSS and JavaScript isolated with CSS classes</h2>
<p>Most of the time, you want to maintain a good level of isolation between CSS and JavaScript, in order to separate concerns and simplify the interaction between the two.</p>
<p>The simplest case of this, and one that’s a long-established best practice, is to use well-defined CSS classes, designed for interaction. The JS side of things then adds and removes them as needed in order to trigger event-driven visual changes:</p>
<pre><code class="lang-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>button</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>relative</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>transform</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span>scale(</span><span class="constant numeric css"><span>1</span></span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>button</span><span class="punctuation definition entity css"><span>.</span></span><span>js-toggled</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>transform</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span>scale(</span><span class="constant numeric css"><span>1.5</span></span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div>
</code></pre>
<pre><code class="lang-js"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>button</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelector</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.button</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>button</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>button</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>classList</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>toggle</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>js-toggled</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div>
</code></pre>
<p>This approach allows for the CSS to handle all of the presentation, while the JavaScript merely triggers the state changes. You could easily switch to a different visual representation of the changes (say, changing color) in plain CSS, without touching a line of JavaScript. Similarly, you could change the condition that triggers the state change purely in JavaScript, with no changes to your CSS files.</p>
<blockquote>
<p><strong>Note:</strong> Consider using a convention for distinguishing plain CSS classes from CSS classes designed for JavaScript interaction. A <code>js-</code> prefix, as used above, is a good choice.</p>
</blockquote>
<h2 id="passing-values-between-css-and-javascript">Passing values between CSS and JavaScript</h2>
<p>Adding and removing classes works great for boolean states, but sometimes you need more complex data passing. One example is if you’re reacting to user input (such as a click or touch) and need to take into account the input coordinates in order to display something.</p>
<p>Let’s say we have a container, and we want to represent the last location the user clicked inside of it. If we have an auxiliary element inside that container, we could move it around by doing:</p>
<pre><code class="lang-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>container</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>relative</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>container</span></span><span>&nbsp;&gt;&nbsp;</span><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>auxElement</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>absolute</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div>
</code></pre>
<pre><code class="lang-js"><div class="line"><span class="source js"><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelector</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>evt</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>aux</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelector</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.container&nbsp;&gt;&nbsp;.auxElement</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>aux</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>transform</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span>translate(</span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span class="variable other object js"><span>evt</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>clientX</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>px,&nbsp;</span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span class="variable other object js"><span>evt</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>clientY</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>px)</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div>
</code></pre>
<p>The above works, but there’s no abstraction between CSS and JavaScript. Not only are we aware of the auxiliary element in JavaScript (which, ideally, we shouldn’t have to be), but we’re even manipulating its properties directly.</p>
<p>Up until now, there wasn’t any great way to solve this, but with custom properties we can easily bring back the missing abstraction layer:</p>
<pre><code class="lang-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>container</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>relative</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span>--click</span></span><span>X</span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="constant numeric css"><span>0</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span>--click</span></span><span>Y</span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="constant numeric css"><span>0</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>container</span></span><span>&nbsp;&gt;&nbsp;</span><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>auxElement</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>absolute</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>transform</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span>translate(</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>c</span><span>l</span><span>i</span><span>c</span><span>k</span><span>X</span><span>,</span><span>&nbsp;</span><span>0</span></span><span>)</span><span>,&nbsp;</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>c</span><span>l</span><span>i</span><span>c</span><span>k</span><span>Y</span><span>,</span><span>&nbsp;</span><span>0</span></span><span>)</span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div>
</code></pre>
<pre><code class="lang-js"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>container</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelector</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>container</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>evt</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>container</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setProperty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>--clickX</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span class="variable other object js"><span>evt</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>clientX</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>px</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>container</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setProperty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>--clickY</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span class="variable other object js"><span>evt</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>clientY</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>px</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div>
</code></pre>
<p>Now we’re back to handling all the presentation details in CSS, and we’re free to change the visual representation without making changes to the JavaScript. In fact, we could now even replace the auxiliary element for an <code>::after</code> block:</p>
<pre><code class="lang-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>container</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>relative</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span>--click</span></span><span>X</span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="constant numeric css"><span>0</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span>--click</span></span><span>Y</span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="constant numeric css"><span>0</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>container</span></span><span class="entity other attribute-name pseudo-element css"><span class="punctuation definition entity css"><span>::</span></span><span>after</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>position</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant property-value css"><span>absolute</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>transform</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span>translate(</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>c</span><span>l</span><span>i</span><span>c</span><span>k</span><span>X</span><span>,</span><span>&nbsp;</span><span>0</span></span><span>)</span><span>,&nbsp;</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>c</span><span>l</span><span>i</span><span>c</span><span>k</span><span>Y</span><span>,</span><span>&nbsp;</span><span>0</span></span><span>)</span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div>
</code></pre>
<blockquote>
<p><strong>Tip:</strong> Have you ever needed to change styles for a pseudo-element (such as <code>::after</code>) from JavaScript? Consider following the pattern above, and using a custom property on the parent as the connection between JavaScript and CSS. It’s an easy, maintainable solution!</p>
</blockquote>
<h2 id="one-variable-many-changes">One variable, many changes</h2>
<p>One event from the logic layer (JavaScript) doesn’t necessarily have to translate into a single change on the CSS side of things; it can have a whole range of effects. A great example of this is theming, where something like the main theme color can affect a large number of elements.</p>
<p>Let’s take the example of a music player app. If you wanted to make the user interface reflect the colors of the album art for the currently playing album without using custom properties, you’d need to maintain a list of elements affected by the color change, as well as which properties to update in each of them. You could do that either in JavaScript:</p>
<pre><code class="lang-js"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>thingsToUpdate</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Map</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>playButton</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>background-color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>title</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>progress</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>background-color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span>}</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>for</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="storage type var js"><span>let</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>id</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;property</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator of js"><span>of</span></span><span>&nbsp;thingsToUpdate</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>id</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setProperty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>property</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newColor</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div>
</code></pre>
<p>Or in HTML:</p>
<pre><code class="lang-html"><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>span</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>title&nbsp;js-update-color</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Song&nbsp;title</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>button</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>play-button&nbsp;js-update-background</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Play</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>button</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>progress-track&nbsp;js-update-background</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div>
</code></pre>
<pre><code class="lang-js"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>colorList</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelectorAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.js-update-color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>for</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="storage type var js"><span>let</span></span><span>&nbsp;el&nbsp;</span><span class="keyword operator of js"><span>of</span></span><span>&nbsp;colorList</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>el</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setProperty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newColor</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>backgroundList</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelectorAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.js-update-background</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>for</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="storage type var js"><span>let</span></span><span>&nbsp;el&nbsp;</span><span class="keyword operator of js"><span>of</span></span><span>&nbsp;backgroundList</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>el</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setProperty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>background-color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newColor</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div>
</code></pre>
<p>Either way, this would make maintenance harder, as this parallel list of affected elements and properties would need to be kept up to date.</p>
<p>Yet another option would be to inject a new stylesheet onto the page, which would override the default colors. This approach is probably slightly better (albeit somewhat hacky), but it would still require overriding a number of styles and keeping some sort of template, which would also need maintenance:</p>
<pre><code class="lang-txt"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>.play-button&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>background-color:&nbsp;${newColor}&nbsp;!important;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>.title&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>color:&nbsp;${newColor}&nbsp;!important;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>.progress-track&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>background-color:&nbsp;${newColor}&nbsp;!important;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>}</span></span></span></div>
</code></pre>
<p>With custom properties, this becomes much simpler; just determine the highest element in the tree that you want to modify, and let cascading do the rest:</p>
<pre><code class="lang-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>player</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span>--theme-color</span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name css"><span>red</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>play-button</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>background-color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>t</span><span>h</span><span>e</span><span>m</span><span>e</span><span>-</span><span>c</span><span>o</span><span>l</span><span>o</span><span>r</span></span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>title</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>t</span><span>h</span><span>e</span><span>m</span><span>e</span><span>-</span><span>c</span><span>o</span><span>l</span><span>o</span><span>r</span></span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css"><span>.</span></span><span>progress-track</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>background-color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support function misc css"><span>var</span></span><span>(</span><span class="variable argument css"><span>-</span><span>-</span><span>t</span><span>h</span><span>e</span><span>m</span><span>e</span><span>-</span><span>c</span><span>o</span><span>l</span><span>o</span><span>r</span></span><span>)</span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div>
</code></pre>
<pre><code class="lang-js"><div class="line"><span class="source js"><span class="support class js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>querySelector</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.player</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setProperty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>--theme-color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newColor</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div>
</code></pre>
<p>This approach doesn’t require your script to have any awareness of which elements are affected, and doesn’t force you to maintain any sort of template for your changes. And as a bonus, it’s significantly simpler than any of the previous approaches!</p>
<h2 id="why-this-is-important">Why this is important</h2>
<p>Limiting your interactions to CSS class names and custom properties allows you to define a strict interface between your JavaScript and your CSS.</p>
<p>This means that any runtime changes are restricted to a set of well-defined entities, which are designed for interaction. By doing this, you’ll reduce the scope for bugs and unexpected behavior, as well as make it easier to test styling and behavior separately.</p>
<p>Maintenance also becomes easier, since you’re able to modify and maintain styling and logic independent of each other, while sticking to the right tools for the job: CSS for styling and JS for logic.</p>
<p>Next week, we’ll take best practices even further and look at the benefits of designing modular and componentized CSS with custom properties. See you then!</p>


  </div>

  Tags:&nbsp;
  <div class="post-tags">
    
      css
    
      custom-properties
    
      js
    
      abstraction
    
  </div>
</article>

    </main>

    <footer class="footer">
  <div class="footer-contents">
    <img class="footer-avatar" src="/assets/images/avatar.jpg" alt="Author's avatar">

    <div class="footer-text">
      <h2 class="footer-heading">Hey there!</h2>
      <p class="footer-description">I’m Sérgio, and I work at Web Developer Relations at Google, helping developers make the web a better place.</p>
    </div>

    <div class="footer-icons">
      <div class="footer-icons-row">
        <a href="https://twitter.com/sergiomdgomes" class="footer-bubble footer-twitter"></a>
        <a href="mailto:mail@sgom.es" class="footer-bubble footer-email"></a>
      </div>
      <div class="footer-icons-row">
        <a href="/feed.xml" class="footer-bubble footer-feed"></a>
        <a href="https://github.com/sgomes" class="footer-bubble footer-github"></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="footer-copyright">Articles under
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons 4.0 Attribution</a>,
    code under <a rel="license" href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>
    (unless otherwise indicated).</div>
  </div>
</footer>


    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(function(err) {
          console.log('Service worker registration failed: ', err);
        });
      }
    </script>

  </body>

</html>
