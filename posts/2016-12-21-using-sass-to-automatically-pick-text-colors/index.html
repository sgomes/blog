<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using Sass to automatically pick text colors</title>
  <meta name="description" content="I’m Sérgio, and I work with Web frontend code. Sometimes I write about it here.">

    <!--
      Hello, and welcome to the source for my site!
      There's not a lot to see around here, but I hope you get some inspiration/ideas/laughs.

      Here's an ASCII art stick figure saying hi:  o/
                                                  /|
                                                  / \

      Also, no, I'm not Spanish. I just like short domain names.
    -->

  <link rel="canonical" href="https://sgom.es/">
  <link rel="alternate" type="application/rss+xml" title="sgom.es" href="/feed.xml">

  <link rel="manifest" href="/manifest.json">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="sgom.es">
  <link rel="icon" sizes="16x16" href="/assets/images/touch/16x16.png">
  <link rel="icon" sizes="32x32" href="/assets/images/touch/32x32.png">
  <link rel="icon" sizes="192x192" href="/assets/images/touch/192x192.png">
  <link rel="icon" sizes="512x512" href="/assets/images/touch/512x512.png">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="sgom.es">
  <link rel="apple-touch-icon" href="/assets/images/touch/152x152.png">

  <meta name="msapplication-TileImage" content="/assets/images/touch/144x144.png">
  <meta name="msapplication-TileColor" content="#009688">

  <meta name="theme-color" content="#009688">

  <link rel="preconnect" href="https://fonts.gstatic.com">

  <style>
  @import url(https://fonts.googleapis.com/css?family=Roboto+Mono|Rubik:400,500);@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:1}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:1}to{opacity:0}}.mdc-ripple-surface--test-edge-var-bug{--mdc-ripple-surface-test-edge-var:1px solid #000;visibility:hidden}.mdc-ripple-surface--test-edge-var-bug::before{border:var(--mdc-ripple-surface-test-edge-var)}.mdc-button{--mdc-ripple-surface-width:0;--mdc-ripple-surface-height:0;--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;will-change:transform,opacity;-webkit-tap-highlight-color:transparent;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-light,rgba(0,0,0,.87));font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;position:relative;min-width:64px;height:36px;padding:0 16px;border:none;border-radius:2px;outline:0;background:0 0;font-size:14px;font-weight:500;letter-spacing:.04em;line-height:36px;text-align:center;text-decoration:none;text-transform:uppercase;overflow:hidden;vertical-align:middle;user-select:none;box-sizing:border-box;-webkit-appearance:none}.mdc-button:not(.mdc-ripple-upgraded):active::after,.mdc-button:not(.mdc-ripple-upgraded):focus::before,.mdc-button:not(.mdc-ripple-upgraded):hover::before{transition-duration:85ms;opacity:.6}.mdc-button::before{background-color:rgba(0,0,0,.06);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button.mdc-ripple-upgraded::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button.mdc-ripple-upgraded--background-focused::before{opacity:.99999}.mdc-button.mdc-ripple-upgraded--background-active-fill::before{transition-duration:120ms;opacity:1}.mdc-button.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);top:var(--mdc-ripple-top,calc(50% - 50%));left:calc(50% - 50%);left:var(--mdc-ripple-left,calc(50% - 50%));width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button::after{background-color:rgba(0,0,0,.06);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button.mdc-ripple-upgraded::after{top:0;left:0;width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center;opacity:0}.mdc-button:not(.mdc-ripple-upgraded--unbounded)::after{transform-origin:center center}.mdc-button.mdc-ripple-upgraded--unbounded::after{top:0;top:var(--mdc-ripple-top,0);left:0;left:var(--mdc-ripple-left,0);width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center}.mdc-button.mdc-ripple-upgraded--foreground-activation::after{animation:.3s mdc-ripple-fg-radius-in forwards,83ms mdc-ripple-fg-opacity-in forwards}.mdc-button.mdc-ripple-upgraded--foreground-deactivation::after{animation:83ms mdc-ripple-fg-opacity-out;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-button:not(.mdc-ripple-upgraded){-webkit-tap-highlight-color:rgba(0,0,0,.18)}.mdc-button--theme-dark,.mdc-theme--dark .mdc-button{--mdc-ripple-surface-width:0;--mdc-ripple-surface-height:0;--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;will-change:transform,opacity;-webkit-tap-highlight-color:transparent;color:#fff;color:var(--mdc-theme-text-primary-on-dark,#fff)}.mdc-button--theme-dark:not(.mdc-ripple-upgraded):active::after,.mdc-button--theme-dark:not(.mdc-ripple-upgraded):focus::before,.mdc-button--theme-dark:not(.mdc-ripple-upgraded):hover::before,.mdc-theme--dark .mdc-button:not(.mdc-ripple-upgraded):active::after,.mdc-theme--dark .mdc-button:not(.mdc-ripple-upgraded):focus::before,.mdc-theme--dark .mdc-button:not(.mdc-ripple-upgraded):hover::before{transition-duration:85ms;opacity:.6}.mdc-button--theme-dark::before,.mdc-theme--dark .mdc-button::before{background-color:rgba(255,255,255,.14);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button--theme-dark.mdc-ripple-upgraded::before,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button--theme-dark.mdc-ripple-upgraded--background-focused::before,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded--background-focused::before{opacity:.99999}.mdc-button--theme-dark.mdc-ripple-upgraded--background-active-fill::before,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded--background-active-fill::before{transition-duration:120ms;opacity:1}.mdc-button--theme-dark.mdc-ripple-upgraded--unbounded::before,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);top:var(--mdc-ripple-top,calc(50% - 50%));left:calc(50% - 50%);left:var(--mdc-ripple-left,calc(50% - 50%));width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button--theme-dark::after,.mdc-theme--dark .mdc-button::after{background-color:rgba(255,255,255,.14);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button--theme-dark.mdc-ripple-upgraded::after,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded::after{top:0;left:0;width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center;opacity:0}.mdc-button--theme-dark:not(.mdc-ripple-upgraded--unbounded)::after,.mdc-theme--dark .mdc-button:not(.mdc-ripple-upgraded--unbounded)::after{transform-origin:center center}.mdc-button--theme-dark.mdc-ripple-upgraded--unbounded::after,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded--unbounded::after{top:0;top:var(--mdc-ripple-top,0);left:0;left:var(--mdc-ripple-left,0);width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center}.mdc-button--theme-dark.mdc-ripple-upgraded--foreground-activation::after,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded--foreground-activation::after{animation:.3s mdc-ripple-fg-radius-in forwards,83ms mdc-ripple-fg-opacity-in forwards}.mdc-button--theme-dark.mdc-ripple-upgraded--foreground-deactivation::after,.mdc-theme--dark .mdc-button.mdc-ripple-upgraded--foreground-deactivation::after{animation:83ms mdc-ripple-fg-opacity-out;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-button--theme-dark:not(.mdc-ripple-upgraded),.mdc-theme--dark .mdc-button:not(.mdc-ripple-upgraded){-webkit-tap-highlight-color:rgba(255,255,255,.18)}.mdc-button.mdc-button--primary{--mdc-ripple-surface-width:0;--mdc-ripple-surface-height:0;--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;will-change:transform,opacity;-webkit-tap-highlight-color:transparent}.mdc-button.mdc-button--primary:not(.mdc-ripple-upgraded):active::after,.mdc-button.mdc-button--primary:not(.mdc-ripple-upgraded):focus::before,.mdc-button.mdc-button--primary:not(.mdc-ripple-upgraded):hover::before{transition-duration:85ms;opacity:.6}.mdc-button.mdc-button--primary::before{background-color:rgba(0,150,136,.12);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}@supports (background-color:color(green a(10%))){.mdc-button.mdc-button--primary::before{background-color:color(var(--mdc-theme-primary,#009688) a(12%))}}.mdc-button.mdc-button--primary.mdc-ripple-upgraded::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button.mdc-button--primary.mdc-ripple-upgraded--background-focused::before{opacity:.99999}.mdc-button.mdc-button--primary.mdc-ripple-upgraded--background-active-fill::before{transition-duration:120ms;opacity:1}.mdc-button.mdc-button--primary.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);top:var(--mdc-ripple-top,calc(50% - 50%));left:calc(50% - 50%);left:var(--mdc-ripple-left,calc(50% - 50%));width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button.mdc-button--primary::after{background-color:rgba(0,150,136,.12);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}@supports (background-color:color(green a(10%))){.mdc-button.mdc-button--primary::after{background-color:color(var(--mdc-theme-primary,#009688) a(12%))}}.mdc-button.mdc-button--primary.mdc-ripple-upgraded::after{top:0;left:0;width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center;opacity:0}.mdc-button.mdc-button--primary:not(.mdc-ripple-upgraded--unbounded)::after{transform-origin:center center}.mdc-button.mdc-button--primary.mdc-ripple-upgraded--unbounded::after{top:0;top:var(--mdc-ripple-top,0);left:0;left:var(--mdc-ripple-left,0);width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center}.mdc-button.mdc-button--primary.mdc-ripple-upgraded--foreground-activation::after{animation:.3s mdc-ripple-fg-radius-in forwards,83ms mdc-ripple-fg-opacity-in forwards}.mdc-button.mdc-button--primary.mdc-ripple-upgraded--foreground-deactivation::after{animation:83ms mdc-ripple-fg-opacity-out;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-button.mdc-button--accent{--mdc-ripple-surface-width:0;--mdc-ripple-surface-height:0;--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;will-change:transform,opacity;-webkit-tap-highlight-color:transparent}.mdc-button.mdc-button--accent:not(.mdc-ripple-upgraded):active::after,.mdc-button.mdc-button--accent:not(.mdc-ripple-upgraded):focus::before,.mdc-button.mdc-button--accent:not(.mdc-ripple-upgraded):hover::before{transition-duration:85ms;opacity:.6}.mdc-button.mdc-button--accent::before{background-color:rgba(255,171,64,.12);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}@supports (background-color:color(green a(10%))){.mdc-button.mdc-button--accent::before{background-color:color(var(--mdc-theme-accent,#ffab40) a(12%))}}.mdc-button.mdc-button--accent.mdc-ripple-upgraded::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button.mdc-button--accent.mdc-ripple-upgraded--background-focused::before{opacity:.99999}.mdc-button.mdc-button--accent.mdc-ripple-upgraded--background-active-fill::before{transition-duration:120ms;opacity:1}.mdc-button.mdc-button--accent.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);top:var(--mdc-ripple-top,calc(50% - 50%));left:calc(50% - 50%);left:var(--mdc-ripple-left,calc(50% - 50%));width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button.mdc-button--accent::after{background-color:rgba(255,171,64,.12);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}@supports (background-color:color(green a(10%))){.mdc-button.mdc-button--accent::after{background-color:color(var(--mdc-theme-accent,#ffab40) a(12%))}}.mdc-button.mdc-button--accent.mdc-ripple-upgraded::after{top:0;left:0;width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center;opacity:0}.mdc-button.mdc-button--accent:not(.mdc-ripple-upgraded--unbounded)::after{transform-origin:center center}.mdc-button.mdc-button--accent.mdc-ripple-upgraded--unbounded::after{top:0;top:var(--mdc-ripple-top,0);left:0;left:var(--mdc-ripple-left,0);width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center}.mdc-button.mdc-button--accent.mdc-ripple-upgraded--foreground-activation::after{animation:.3s mdc-ripple-fg-radius-in forwards,83ms mdc-ripple-fg-opacity-in forwards}.mdc-button.mdc-button--accent.mdc-ripple-upgraded--foreground-deactivation::after{animation:83ms mdc-ripple-fg-opacity-out;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-button:active{outline:0}.mdc-button:hover{cursor:pointer}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button--dense{height:32px;font-size:.8125rem;line-height:32px}.mdc-button--raised{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);will-change:box-shadow;min-width:88px}.mdc-button--raised:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mdc-button--raised.mdc-button--primary{--mdc-ripple-surface-width:0;--mdc-ripple-surface-height:0;--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;will-change:transform,opacity;-webkit-tap-highlight-color:transparent}.mdc-button--raised.mdc-button--primary:not(.mdc-ripple-upgraded):active::after,.mdc-button--raised.mdc-button--primary:not(.mdc-ripple-upgraded):focus::before,.mdc-button--raised.mdc-button--primary:not(.mdc-ripple-upgraded):hover::before{transition-duration:85ms;opacity:.6}.mdc-button--raised.mdc-button--primary::before{background-color:rgba(255,255,255,.14);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded--background-focused::before{opacity:.99999}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded--background-active-fill::before{transition-duration:120ms;opacity:1}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);top:var(--mdc-ripple-top,calc(50% - 50%));left:calc(50% - 50%);left:var(--mdc-ripple-left,calc(50% - 50%));width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button--raised.mdc-button--primary::after{background-color:rgba(255,255,255,.14);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded::after{top:0;left:0;width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center;opacity:0}.mdc-button--raised.mdc-button--primary:not(.mdc-ripple-upgraded--unbounded)::after{transform-origin:center center}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded--unbounded::after{top:0;top:var(--mdc-ripple-top,0);left:0;left:var(--mdc-ripple-left,0);width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded--foreground-activation::after{animation:.3s mdc-ripple-fg-radius-in forwards,83ms mdc-ripple-fg-opacity-in forwards}.mdc-button--raised.mdc-button--primary.mdc-ripple-upgraded--foreground-deactivation::after{animation:83ms mdc-ripple-fg-opacity-out;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-button--raised.mdc-button--accent{--mdc-ripple-surface-width:0;--mdc-ripple-surface-height:0;--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;will-change:transform,opacity;-webkit-tap-highlight-color:transparent}.mdc-button--raised.mdc-button--accent:not(.mdc-ripple-upgraded):active::after,.mdc-button--raised.mdc-button--accent:not(.mdc-ripple-upgraded):focus::before,.mdc-button--raised.mdc-button--accent:not(.mdc-ripple-upgraded):hover::before{transition-duration:85ms;opacity:.6}.mdc-button--raised.mdc-button--accent::before{background-color:rgba(255,255,255,.14);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded--background-focused::before{opacity:.99999}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded--background-active-fill::before{transition-duration:120ms;opacity:1}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);top:var(--mdc-ripple-top,calc(50% - 50%));left:calc(50% - 50%);left:var(--mdc-ripple-left,calc(50% - 50%));width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform:scale(var(--mdc-ripple-fg-scale,0))}.mdc-button--raised.mdc-button--accent::after{background-color:rgba(255,255,255,.14);position:absolute;top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%;transition:opacity 250ms linear;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded::after{top:0;left:0;width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center;opacity:0}.mdc-button--raised.mdc-button--accent:not(.mdc-ripple-upgraded--unbounded)::after{transform-origin:center center}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded--unbounded::after{top:0;top:var(--mdc-ripple-top,0);left:0;left:var(--mdc-ripple-left,0);width:100%;width:var(--mdc-ripple-fg-size,100%);height:100%;height:var(--mdc-ripple-fg-size,100%);transform:scale(0);transform-origin:center center}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded--foreground-activation::after{animation:.3s mdc-ripple-fg-radius-in forwards,83ms mdc-ripple-fg-opacity-in forwards}.mdc-button--raised.mdc-button--accent.mdc-ripple-upgraded--foreground-deactivation::after{animation:83ms mdc-ripple-fg-opacity-out;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-button--theme-dark .mdc-button--raised,.mdc-theme--dark .mdc-button--raised{background-color:#009688;background-color:var(--mdc-theme-primary,#009688);color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff)}.mdc-button--theme-dark .mdc-button--raised::before,.mdc-theme--dark .mdc-button--raised::before{color:#000}.mdc-button--primary{color:#009688;color:var(--mdc-theme-primary,#009688)}.mdc-button--theme-dark .mdc-button--primary,.mdc-theme--dark .mdc-button--primary{color:#009688;color:var(--mdc-theme-primary,#009688)}.mdc-button--primary.mdc-button--raised{background-color:#009688;background-color:var(--mdc-theme-primary,#009688);color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff)}.mdc-button--primary.mdc-button--raised::before{color:#000}.mdc-button--accent{color:#ffab40;color:var(--mdc-theme-accent,#ffab40)}.mdc-button--theme-dark .mdc-button--accent,.mdc-theme--dark .mdc-button--accent{color:#ffab40;color:var(--mdc-theme-accent,#ffab40)}.mdc-button--accent.mdc-button--raised{background-color:#ffab40;background-color:var(--mdc-theme-accent,#ffab40);color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-accent,rgba(0,0,0,.87))}.mdc-button--accent.mdc-button--raised::before{color:#000}.mdc-button--compact{padding:0 8px}.mdc-button:disabled,fieldset:disabled .mdc-button{color:rgba(0,0,0,.26);cursor:default;pointer-events:none}.mdc-button--theme-dark .mdc-button:disabled,.mdc-button--theme-dark fieldset:disabled .mdc-button,.mdc-theme--dark .mdc-button:disabled,.mdc-theme--dark fieldset:disabled .mdc-button{color:rgba(255,255,255,.3)}.mdc-button--raised:disabled,fieldset:disabled .mdc-button--raised{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);background-color:rgba(0,0,0,.12);pointer-events:none}.mdc-button--theme-dark .mdc-button--raised:disabled,.mdc-button--theme-dark fieldset:disabled .mdc-button--raised,.mdc-theme--dark .mdc-button--raised:disabled,.mdc-theme--dark fieldset:disabled .mdc-button--raised{background-color:rgba(255,255,255,.12)}.header{display:flex;height:80px;background:#009688;color:#fff;justify-content:center;align-items:center;flex-shrink:0;z-index:2;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.header-title{text-decoration:none;color:#fff;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:2.125rem;font-weight:400;letter-spacing:normal;line-height:2.5rem;margin:-.5rem 0 4rem -.07em;font-weight:700}.header-title:hover,.header-title:visited{color:#fff}.post{background:#fff;padding:3.5rem 4.5rem;margin:0 auto;color:rgba(0,0,0,.87);width:100%;max-width:45rem;box-sizing:border-box}@media screen and (max-width:600px){.post{padding:2rem 1rem}}.post-title{display:block;color:#009688;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.5rem;font-weight:500;letter-spacing:normal;line-height:2rem;margin:-.5rem 0 1rem -.06em;margin-bottom:0}.post-meta{display:block;color:#009688;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:normal;line-height:1.5rem;margin-bottom:16px}.post-tags{display:flex;align-items:baseline;flex-grow:1;line-height:normal}.post-tags-list{display:inline-block;flex-grow:1;margin-left:.2rem;font-family:'Roboto Mono',monospace;letter-spacing:normal}.post-image{max-width:100%;margin:0 auto}.post-image>img{display:block}.post-content{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875em;font-weight:400;letter-spacing:normal;line-height:1.6em;font-size:1rem;letter-spacing:normal;box-sizing:border-box}.post-content h1{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.5rem;font-weight:500;letter-spacing:normal;line-height:2rem}.post-content h2{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:normal;line-height:2rem;margin-top:2rem}.post-content h2+h3{margin-top:1em}.post-content h3{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:normal;line-height:2rem;font-size:1.1rem;line-height:1.5rem;margin:2em 0 0}.post-content h4{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:normal;line-height:1.5rem;font-size:1rem;letter-spacing:normal;margin:2em 0 0;color:rgba(0,0,0,.6)}.post-content a{color:#009688;text-decoration-skip-ink:auto}.post-content a:hover,.post-content a:visited{color:#009688}.post-content pre{border-radius:2px;margin:0;padding:16px;font-size:.9375em;font-style:normal;font-weight:400;letter-spacing:normal;line-height:normal;font-family:'Roboto Mono',monospace;overflow-x:auto}.post-content pre+pre{margin-top:16px}.post-content code{font-size:.9375em;color:#0d47a1;font-family:'Roboto Mono',monospace}.post-content strong{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:normal;line-height:1.5rem;font-size:1rem;letter-spacing:normal}.post-content figure{max-width:100%;box-sizing:border-box;margin:0}.post-content figcaption{text-align:center;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.75rem;font-weight:400;letter-spacing:normal;line-height:1.25rem}.post-content blockquote{margin:1.5em 0 2em 2.5em;border-left:1px solid #00bfa5;padding-left:1rem}.post-content table{display:block;margin:0 0 2rem;border-collapse:collapse;text-align:center;overflow-x:auto}.post-content table th{font-weight:500}.post-content table td,.post-content table th{padding:8px;border:1px solid #ddd}.post-content li+li{margin-top:.5rem}.post-content .overflow-x{overflow-x:auto}.home{padding:1rem 0;box-sizing:border-box}.home-post-list{box-sizing:border-box;list-style:none;padding:0 1rem;margin:0 auto 0 auto;width:100%;max-width:45rem}.home-post-entry{background:#fff;padding:2rem 3.5rem;box-sizing:border-box;width:100%;border-radius:2px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875em;font-weight:400;letter-spacing:normal;line-height:1.6em}.home-post-entry+.home-post-entry{margin-top:16px}.home-post-title{display:inline;padding-right:4px;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.5rem;font-weight:500;letter-spacing:normal;line-height:2rem;margin:-.5rem 0 1rem -.06em}.home-post-title>a{text-decoration:none;color:#009688}.home-post-title>a:hover,.home-post-title>a:visited{color:#009688}.home-post-meta{margin-bottom:0}.home-post-excerpt{margin:8px 0 0 0;color:rgba(0,0,0,.87);font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875em;font-weight:400;letter-spacing:normal;line-height:1.6em;font-size:1rem;letter-spacing:normal}.home-post-bottom{display:flex;flex-flow:row;padding-top:16px;align-items:flex-end}.home-pagination{display:flex;flex-flow:row nowrap;padding:16px 8px;box-sizing:border-box;margin:0 auto;width:100%;max-width:45rem}.home-page-previous{margin-right:auto}.home-page-next{margin-left:auto}@media screen and (max-width:600px){.home-post-bottom{align-items:flex-start;flex-direction:column}.home-post-tags{margin-bottom:1rem}.home-post-entry{padding:1rem}}.footer{display:flex;flex-flow:column nowrap;width:100%;background-color:#009688;color:#fff;padding:16px;box-sizing:border-box;flex-shrink:0;z-index:2;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.footer-contents{display:flex;position:relative;flex-flow:row nowrap;justify-content:center;align-items:center;margin:0 auto 0 auto;flex-shrink:0;box-sizing:border-box;padding:0 24px;width:100%;max-width:45rem}@media (max-width:600px){.footer-contents{flex-wrap:wrap;padding:0}}.footer-avatar{border-radius:10%;width:100px;height:100px;background:#000;flex-grow:0;flex-shrink:0;margin-right:16px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.footer-text{flex-grow:1;flex-shrink:1;padding:16px;width:50%}.footer-heading{font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:normal;line-height:2rem;margin:-.5rem 0 1rem -.05em;margin-bottom:8px}.footer-description{margin:0}.footer-icons{display:block;flex-shrink:0;margin:.5rem 0}.footer-icons-row{display:block;flex-shrink:0}@media (max-width:600px){.footer-icons-row{display:inline-block}}.footer-bubble{display:inline-block;border-radius:50%;height:40px;width:40px;flex-shrink:0;margin:2px;background-repeat:no-repeat;background-size:contain;background-position:center}.footer-twitter{background-image:url(/assets/images/twitter.svg)}.footer-github{border-radius:0;background-image:url(/assets/images/github.svg)}.footer-email{background-image:url(/assets/images/email.svg)}.footer-feed{background-image:url(/assets/images/feed.svg)}.footer-bottom{display:flex;position:relative;justify-content:center;margin:8px auto 0 auto;flex-shrink:0;width:100%;max-width:45rem}.footer-bottom::before{display:block;position:absolute;top:50%;width:100%;height:1px;background:rgba(255,255,255,.17);content:''}.footer-copyright{display:inline-block;text-align:center;background:#009688;z-index:2;padding:0 8px;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.75rem;font-weight:400;letter-spacing:normal;line-height:1.25rem}.footer-copyright a{color:#fff;text-decoration:none;font-weight:700}.footer-copyright a:hover,.footer-copyright a:visited{color:#fff}.post-content pre{background:#f5f5f5}.post-content pre code{color:rgba(0,0,0,.87)}.post-content pre code .comment{color:#616161}.post-content pre code .comment .markup.link{color:#616161}.post-content pre code .entity.name.type{color:#3e2723}.post-content pre code .entity.other.inherited-class{color:#1b5e20}.post-content pre code .keyword{color:#4a148c}.post-content pre code .keyword.control{color:#4a148c}.post-content pre code .keyword.operator{color:rgba(0,0,0,.87)}.post-content pre code .keyword.other.special-method{color:#0d47a1}.post-content pre code .keyword.other.unit{color:#e65100}.post-content pre code .storage{color:#4a148c}.post-content pre code .constant{color:#e65100}.post-content pre code .constant.character.escape{color:#006064}.post-content pre code .constant.numeric{color:#e65100}.post-content pre code .constant.other.color{color:#006064}.post-content pre code .constant.other.symbol{color:#1b5e20}.post-content pre code .variable{color:#b71c1c}.post-content pre code .variable.interpolation{color:#3e2723}.post-content pre code .variable.parameter.function{color:rgba(0,0,0,.87)}.post-content pre code .invalid.illegal{background-color:#b71c1c;color:#f5f5f5}.post-content pre code .string{color:#1b5e20}.post-content pre code .string.regexp{color:#006064}.post-content pre code .string.regexp .source.ruby.embedded{color:#3e2723}.post-content pre code .string.other.link{color:#b71c1c}.post-content pre code .punctuation.definition.array,.post-content pre code .punctuation.definition.parameters{color:rgba(0,0,0,.87)}.post-content pre code .punctuation.definition.heading,.post-content pre code .punctuation.definition.identity{color:#0d47a1}.post-content pre code .punctuation.definition.bold{color:#3e2723;font-weight:700}.post-content pre code .punctuation.definition.italic{color:#4a148c;font-style:italic}.post-content pre code .punctuation.section.embedded{color:#3e2723}.post-content pre code .punctuation.section.class,.post-content pre code .punctuation.section.inner-class,.post-content pre code .punctuation.section.method{color:rgba(0,0,0,.87)}.post-content pre code .support.class{color:#3e2723}.post-content pre code .support.function{color:#006064}.post-content pre code .support.function.any-method{color:#0d47a1}.post-content pre code .entity.name.function{color:#0d47a1}.post-content pre code .entity.name.class,.post-content pre code .entity.name.type.class{color:#3e2723}.post-content pre code .entity.name.section{color:#0d47a1}.post-content pre code .entity.name.tag{color:#b71c1c}.post-content pre code .entity.other.attribute-name{color:#e65100}.post-content pre code .entity.other.attribute-name.id{color:#0d47a1}.post-content pre code .meta.class{color:#3e2723}.post-content pre code .meta.class.body{color:rgba(0,0,0,.87)}.post-content pre code .meta.link{color:#e65100}.post-content pre code .meta.method,.post-content pre code .meta.method-call{color:rgba(0,0,0,.87)}.post-content pre code .meta.require{color:#0d47a1}.post-content pre code .meta.selector{color:#4a148c}.post-content pre code .meta.separator{background-color:#373b41;color:rgba(0,0,0,.87)}.post-content pre code .meta.tag{color:rgba(0,0,0,.87)}.post-content pre code .none{color:rgba(0,0,0,.87)}.post-content pre code .markup.bold{color:#e65100;font-weight:700}.post-content pre code .markup.changed{color:#4a148c}.post-content pre code .markup.deleted{color:#b71c1c}.post-content pre code .markup.italic{color:#4a148c;font-style:italic}.post-content pre code .markup.heading{color:#b71c1c}.post-content pre code .markup.heading .punctuation.definition.heading{color:#0d47a1}.post-content pre code .markup.link{color:#0d47a1}.post-content pre code .markup.inserted{color:#1b5e20}.post-content pre code .markup.quote{color:#e65100}.post-content pre code .markup.raw{color:#1b5e20}.post-content pre code .source.gfm .markup{-webkit-font-smoothing:auto}.post-content pre code .source.gfm .link .entity{color:#006064}.aspect-ratio{--aspect-ratio-w:1;--aspect-ratio-h:1;position:relative}.aspect-ratio>:first-child{width:100%}@supports (--custom-props:true){.aspect-ratio::before{display:block;padding-top:calc(var(--aspect-ratio-h,1)/ var(--aspect-ratio-w,1) * 100%);content:""}.aspect-ratio>:first-child{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%}}body,html{display:flex;flex-direction:column;margin:0;padding:0;box-sizing:border-box;font-family:Rubik,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:100%}.site-content{flex-grow:1;background:#eceff1;box-sizing:border-box}.mdc-button{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-decoration:none}
  </style>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90468985-1', 'auto');
  ga('send', 'pageview');

</script>

  
</head>


  <body>

    <header class="header" role="banner">
<div>
  <a class="header-title" href="/">sgom.es</a>
</div>
</header>


    <main class="site-content" aria-label="Content">
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Using Sass to automatically pick text colors</h1>
    <time class="post-meta" datetime="2016-12-21T16:51:00+00:00" itemprop="datePublished">(2016-12-21)</time>
  </header>

  <div class="post-content" itemprop="articleBody">
    
<p><em>Originally <a href="https://medium.com/dev-channel/using-sass-to-automatically-pick-text-colors-4ba7645d2796">posted on Medium</a></em></p>
<p>Theming is always a challenge, particularly when you’re working on a library, rather than a standalone website. One example of an interesting issue that you’ll come across very frequently is choosing a text color that ensures readability and accessibility.</p>
<div class="aspect-ratio post-image"
     style="width: 558px; --aspect-ratio-w: 558; --aspect-ratio-h: 146;">
  <img src="light-dark.png" alt="">
</div>





<p>This is easy enough when you have known light or dark backgrounds; you can create two CSS classes and have users of your CSS library manually add them in depending on context.</p>
<p>Jekyll also offers powerful support for code snippets:</p>
<pre><code class="language-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity name tag custom css"><span>dark-background-contrast</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name css"><span>white</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity name tag custom css"><span>light-background-contrast</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name css"><span>black</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div></code></pre>
<p>However, things become a bit trickier if you want to add the concept of a <strong>theme color</strong> to your library, and make it easy to use. This color will very often be used as a background, and will need sufficient contrast for the text that’s placed on top.</p>
<pre><code class="language-css"><div class="line"><span class="source css"><span class="meta selector css"><span class="entity name tag custom css"><span>theme-color-bg</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>background-color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="constant other color rgb-value css"><span class="punctuation definition constant css"><span>#</span></span><span>3f51b5</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div><div class="line"><span class="source css"><span>&nbsp;</span></span></div><div class="line"><span class="source css"><span class="meta selector css"><span class="entity name tag custom css"><span>theme-color-bg-contrast</span></span><span>&nbsp;</span></span><span class="meta property-list css"><span class="punctuation section property-list begin css"><span>{</span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span>&nbsp;&nbsp;</span><span class="meta property-name css"><span class="support type property-name css"><span>color</span></span></span><span class="meta property-value css"><span class="punctuation separator key-value css"><span>:</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name css"><span>white</span></span><span class="punctuation terminator rule css"><span>;</span></span></span></span></span></div><div class="line"><span class="source css"><span class="meta property-list css"><span class="punctuation section property-list end css"><span>}</span></span></span></span></div></code></pre>
<p>In the example above, <code>theme-color-bg-contrast</code> needs to change to a <code>black</code> text color if the user-defined theme color is light. While this is impossible to do in pure CSS (at least until the extremely useful <a href="https://drafts.csswg.org/css-color/">CSS Color Module 4</a> is widely available), it can be done in Sass!</p>
<h2 id="working-out-the-sass">Working out the Sass</h2>
<p>Here’s what the initial Sass should look like:</p>
<pre><code class="language-scss"><div class="line"><span class="source css scss"><span class="meta set variable"><span class="variable"><span>$theme-color</span></span><span class="punctuation"><span>:</span></span><span>&nbsp;</span><span class="constant other color rgb-value scss"><span class="punctuation definition constant scss"><span>#</span></span><span>3f51b5</span></span><span>&nbsp;</span><span class="keyword other default scss"><span>!default</span></span></span><span>;</span></span></div><div class="line"><span class="source css scss"><span>&nbsp;</span></span></div><div class="line"><span class="source css scss"><span class="entity name tag custom scss"><span>theme-color-bg</span></span><span>&nbsp;</span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span>&nbsp;&nbsp;</span><span class="meta property-name scss"><span class="support type property-name scss"><span>background-color</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="variable scss"><span class="variable scss"><span>$theme-color</span></span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="punctuation section property-list end scss"><span>}</span></span></span></span></div><div class="line"><span class="source css scss"><span>&nbsp;</span></span></div><div class="line"><span class="source css scss"><span class="entity name tag custom scss"><span>theme-color-bg-contrast</span></span><span>&nbsp;</span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span>&nbsp;&nbsp;</span><span class="meta property-name scss"><span class="support type property-name scss"><span>color</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>choose-contrast-color</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$theme-color</span></span></span><span class="punctuation section function scss"><span>)</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="punctuation section property-list end scss"><span>}</span></span></span></span></div></code></pre>
<p>Users can override the <code>$theme-color</code>, and depending on what they pick, the <code>choose-contrast-color</code> function will return either <code>black</code> or <code>white</code>.</p>
<p>So how do we implement <code>choose-contrast-color</code>? It turns out that all of the necessary calculations and minimum contrast rules are well defined in the <a href="https://www.w3.org/TR/WCAG20/">WCAG 2.0 specification</a>. There’s a <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html">whole section explaining visual contrast in detail</a>, several links to ISO and ANSI standards, and even <a href="https://www.w3.org/Graphics/Color/sRGB.html">papers on the subject</a>. Digging around for a while, I was able to find a <a href="https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests">published W3C technique with a clear description of the algorithm</a>:</p>
<figure>
  <div class="aspect-ratio post-image"
       style="width: 1606px; --aspect-ratio-w: 1606; --aspect-ratio-h: 1144;">
    <img src="algorithm.png" alt="The algorithm for calculating color contrast">
  </div>
  <figcaption>The algorithm for calculating color contrast</figcaption>
</figure>





<p>If you’re familiar with Sass, you’ll quickly notice an issue: the luminance calculations involve exponentiation, which isn’t available in the language or the standard library.</p>
<p>One solution to this would be to use the extensive <a href="http://compass-style.org/">Compass library</a>, which not only includes exponentiation, but also the luminance operations we’re trying to implement. It requires Ruby, however, so it’s not an option for <a href="https://github.com/sass/node-sass">node-sass</a> users. A pure Sass solution would be better.</p>
<h2 id="using-old-tricks">Using old tricks</h2>
<p>I was reviewing my math and exploring the possibility of using Newtonian approximation for the fractional parts of the exponent, until I had a chat with <a href="https://twitter.com/wibblymat">@wibblymat</a>, who happened to be implementing an emulator at the time. He suggested a much simpler, old-school approach: using a lookup table!</p>
<p>The only part that involves exponentiation is the per-channel color space conversions done as part of the luminance calculation. In addition, there are only 256 possible values for each channel. This means that we can easily create a lookup table.</p>
<figure>
  <div class="aspect-ratio post-image"
       style="width: 370px; --aspect-ratio-w: 370; --aspect-ratio-h: 584;">
    <img src="lookup.png" alt="An excerpt of the lookup table">
  </div>
  <figcaption>An excerpt of the lookup table</figcaption>
</figure>





<p>You can take a look at <a href="https://github.com/material-components/material-components-web/blob/master/packages/mdc-theme/_constants.scss">the full table</a> that I generated for the <a href="https://github.com/material-components/material-components-web">MDC-Web project</a> to avoid having to generate your own.</p>
<p>With the channel values calculated, we can implement the rest of the algorithm easily:</p>
<pre><code class="language-scss"><div class="line"><span class="source css scss"><span class="comment block scss"><span class="punctuation whitespace comment trailing scss"><span>/*</span></span><span>*</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;Calculate&nbsp;the&nbsp;luminance&nbsp;for&nbsp;a&nbsp;color.</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;See&nbsp;</span><span class="markup underline link https hyperlink"><span>https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests</span></span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;</span><span class="punctuation whitespace comment trailing scss"><span>*/</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta at-rule function scss"><span class="keyword control at-rule function scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>function</span></span><span>&nbsp;</span><span class="support function misc scss"><span>luminance</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span></span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$red</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>nth</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$linear-channel-values</span></span></span><span class="punctuation scss"><span>,</span></span><span>&nbsp;</span><span class="support function misc scss"><span>red</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span><span class="constant numeric scss"><span>+&nbsp;1</span></span><span class="punctuation section function scss"><span>)</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$green</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>nth</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$linear-channel-values</span></span></span><span class="punctuation scss"><span>,</span></span><span>&nbsp;</span><span class="support function misc scss"><span>green</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span><span class="constant numeric scss"><span>+&nbsp;1</span></span><span class="punctuation section function scss"><span>)</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$blue</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>nth</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$linear-channel-values</span></span></span><span class="punctuation scss"><span>,</span></span><span>&nbsp;</span><span class="support function misc scss"><span>blue</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span><span class="constant numeric scss"><span>+&nbsp;1</span></span><span class="punctuation section function scss"><span>)</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span>&nbsp;</span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta at-rule return scss"><span>&nbsp;&nbsp;</span><span class="keyword control return scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>return</span></span><span class="constant numeric scss"><span>&nbsp;.2126</span></span><span>&nbsp;*</span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$red</span></span><span>&nbsp;</span></span><span class="constant numeric scss"><span>+&nbsp;.7152</span></span><span>&nbsp;*</span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$green</span></span><span>&nbsp;</span></span><span class="constant numeric scss"><span>+&nbsp;.0722</span></span><span>&nbsp;*</span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$blue</span></span></span></span><span>;</span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="punctuation section property-list end scss"><span>}</span></span></span></span></div><div class="line"><span class="source css scss"><span>&nbsp;</span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span class="punctuation whitespace comment trailing scss"><span>/*</span></span><span>*</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;Calculate&nbsp;the&nbsp;contrast&nbsp;ratio&nbsp;between&nbsp;two&nbsp;colors.</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;See&nbsp;</span><span class="markup underline link https hyperlink"><span>https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests</span></span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;</span><span class="punctuation whitespace comment trailing scss"><span>*/</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta at-rule function scss"><span class="keyword control at-rule function scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>function</span></span><span>&nbsp;</span><span class="support function misc scss"><span>contrast</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$back</span></span></span><span class="punctuation scss"><span>,</span></span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$front</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span></span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$backLum</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>luminance</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$back</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span><span class="constant numeric scss"><span>+&nbsp;.05</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$foreLum</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>luminance</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$front</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span><span class="constant numeric scss"><span>+&nbsp;.05</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span>&nbsp;</span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta at-rule return scss"><span>&nbsp;&nbsp;</span><span class="keyword control return scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>return</span></span><span>&nbsp;</span><span class="support function misc scss"><span>max</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$backLum</span></span></span><span class="punctuation scss"><span>,</span></span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$foreLum</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;/&nbsp;</span><span class="support function misc scss"><span>min</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$backLum</span></span></span><span class="punctuation scss"><span>,</span></span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$foreLum</span></span></span><span class="punctuation section function scss"><span>)</span></span></span><span>;</span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="punctuation section property-list end scss"><span>}</span></span></span></span></div><div class="line"><span class="source css scss"><span>&nbsp;</span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span class="punctuation whitespace comment trailing scss"><span>/*</span></span><span>*</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;Determine&nbsp;whether&nbsp;to&nbsp;use&nbsp;dark&nbsp;or&nbsp;light&nbsp;text&nbsp;on&nbsp;top&nbsp;of</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;given&nbsp;color.</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;*&nbsp;Returns&nbsp;black&nbsp;for&nbsp;dark&nbsp;text&nbsp;and&nbsp;white&nbsp;for&nbsp;light&nbsp;text.</span></span></span></div><div class="line"><span class="source css scss"><span class="comment block scss"><span>&nbsp;</span><span class="punctuation whitespace comment trailing scss"><span>*/</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta at-rule function scss"><span class="keyword control at-rule function scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>function</span></span><span>&nbsp;</span><span class="support function misc scss"><span>choose-contrast-color</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation section function scss"><span>)</span></span><span>&nbsp;</span></span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$lightContrast</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>contrast</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation scss"><span>,</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name scss"><span>white</span></span><span class="punctuation section function scss"><span>)</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="variable scss"><span>&nbsp;&nbsp;</span><span class="variable scss"><span>$darkContrast</span></span></span><span class="meta property-value scss"><span class="punctuation separator key-value scss"><span>:</span></span><span>&nbsp;</span><span class="support function misc scss"><span>contrast</span></span><span class="punctuation section function scss"><span>(</span></span><span class="variable scss"><span class="variable scss"><span>$color</span></span></span><span class="punctuation scss"><span>,</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name scss"><span>black</span></span><span class="punctuation section function scss"><span>)</span></span><span class="punctuation terminator rule scss"><span>;</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span>&nbsp;</span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta at-rule if scss"><span>&nbsp;&nbsp;</span><span class="keyword control if scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>if</span></span><span>&nbsp;</span><span>(</span><span class="variable scss"><span class="variable scss"><span>$lightContrast</span></span><span>&nbsp;</span></span><span>&gt;</span><span class="variable scss"><span>&nbsp;</span><span class="variable scss"><span>$darkContrast</span></span></span><span>)</span><span>&nbsp;</span></span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta property-list scss"><span class="meta at-rule return scss"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control return scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>return</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name scss"><span>white</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta property-list scss"><span>&nbsp;&nbsp;</span><span class="punctuation section property-list end scss"><span>}</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta at-rule else scss"><span>&nbsp;&nbsp;</span><span class="keyword control else scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>else&nbsp;</span></span></span><span class="meta property-list scss"><span class="punctuation section property-list begin scss"><span>{</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta property-list scss"><span class="meta at-rule return scss"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control return scss"><span class="punctuation definition keyword scss"><span>@</span></span><span>return</span></span><span>&nbsp;</span><span class="support constant color w3c-standard-color-name scss"><span>black</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="meta property-list scss"><span>&nbsp;&nbsp;</span><span class="punctuation section property-list end scss"><span>}</span></span></span></span></span></div><div class="line"><span class="source css scss"><span class="meta property-list scss"><span class="punctuation section property-list end scss"><span>}</span></span></span></span></div></code></pre>
<p>That’s it! We now have contrast calculation in Sass, and we’re automatically picking black or white text, depending on which provides the most contrast. This can have a huge impact on readability, particularly for users with low vision.</p>
<p>This solution only requires an extra, pre-calculated constants file that will never change. It works with any Sass implementation, and it won’t bloat your CSS since it’s only used at build time. Pretty neat!</p>
<p>Next time, I want to look at how to do the same thing in JavaScript, at runtime, so you can have dynamic theming with CSS custom properties. See you then!</p>
<p><strong>Edit</strong>: <a href="http://www.sassmeister.com/gist/ccc72f71137fe29039c92c0a9fe9b657">here’s a Sassmeister live demo</a> of the technique above.</p>


  </div>

  <div class="post-tags">
      <span class="post-tags-head">Tags:&nbsp;</span>
      <div class="post-tags-list">
        
          sass
        
          theming
        
      </div>
  </div>
</article>

    </main>

    <footer class="footer">
  <div class="footer-contents">
    <img class="footer-avatar" src="/assets/images/avatar.jpg" alt="Author's avatar">

    <div class="footer-text">
      <h2 class="footer-heading">Hey there!</h2>
      <p class="footer-description">I’m Sérgio, and I work with Web frontend code. Sometimes I write about it here.</p>
    </div>

    <div class="footer-icons">
      <div class="footer-icons-row">
        <a href="https://twitter.com/sergiomdgomes" class="footer-bubble footer-twitter" aria-label="Author's Twitter page"></a>
        <a href="mailto:mail@sgom.es" class="footer-bubble footer-email" aria-label="Author's email address"></a>
      </div>
      <div class="footer-icons-row">
        <a href="/feed.xml" class="footer-bubble footer-feed" aria-label="Atom feed for this site"></a>
        <a href="https://github.com/sgomes" class="footer-bubble footer-github" aria-label="Author's GitHub profile'"></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="footer-copyright">Articles under
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons 4.0 Attribution</a>,
    code under <a rel="license" href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>
    (unless otherwise indicated).</div>
  </div>
</footer>


    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(function(err) {
          console.log('Service worker registration failed: ', err);
        });
      }
    </script>

  </body>

</html>
