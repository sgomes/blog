<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Material Money - a sample PWA</title>
  <meta name="description" content="I’m Sérgio, and I work at Web Developer Relations at Google, helping developers make the web a better place.">

    <!--
      Hello, and welcome to the source for my site!
      There's not a lot to see around here, but I hope you get some inspiration/ideas/laughs.

      Here's an ASCII art stick figure saying hi:  o/
                                                  /|
                                                  / \
    -->

  <link rel="canonical" href="https://sgom.es/">
  <link rel="alternate" type="application/rss+xml" title="sgom.es" href="/feed.xml">

  <link rel="manifest" href="/manifest.json">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="sgom.es">
  <link rel="icon" sizes="16x16" href="/assets/images/touch/16x16.png">
  <link rel="icon" sizes="32x32" href="/assets/images/touch/32x32.png">
  <link rel="icon" sizes="192x192" href="/assets/images/touch/192x192.png">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="sgom.es">
  <link rel="apple-touch-icon" href="/assets/images/touch/152x152.png">

  <meta name="msapplication-TileImage" content="/assets/images/touch/144x144.png">
  <meta name="msapplication-TileColor" content="#009688">

  <meta name="theme-color" content="#009688">

  <style>
  @font-face{font-display:fallback;font-family:Roboto;font-style:normal;font-weight:400;src:local("Roboto"),local("Roboto-Regular"),url(/assets/fonts/oMMgfZMQthOryQo9n22dcuvvDin1pK8aKteLpeZ5c0A.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:Roboto;font-style:normal;font-weight:500;src:local("Roboto Medium"),local("Roboto-Medium"),url(/assets/fonts/RxZJdnzeo3R5zSexge8UUZBw1xU1rKptJj_0jans920.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:Roboto;font-style:normal;font-weight:700;src:local("Roboto Bold"),local("Roboto-Bold"),url(/assets/fonts/d-6IYplOFocCacKzxwXSOJBw1xU1rKptJj_0jans920.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:Roboto;font-style:italic;font-weight:400;src:local("Roboto Italic"),local("Roboto-Italic"),url(/assets/fonts/vPcynSL0qHq_6dX7lKVByXYhjbSpvc47ee6xR_80Hnw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-display:fallback;font-family:Roboto;font-style:italic;font-weight:500;src:local("Roboto Medium Italic"),local("Roboto-MediumItalic"),url(/assets/fonts/OLffGBTaF0XFOW1gnuHF0Ygp9Q8gbYrhqGlRav_IXfk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;src:local("Roboto Mono"),local("RobotoMono-Regular"),url(/assets/fonts/hMqPNLsu_dywMa4C_DEpY4gp9Q8gbYrhqGlRav_IXfk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215}.mdc-button{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:.04em;line-height:1.5rem;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-light,rgba(0,0,0,.87));display:inline-block;position:relative;min-width:64px;height:36px;padding:0 16px;border:none;border-radius:2px;outline:0;background:0 0;font-size:14px;font-weight:500;line-height:36px;text-align:center;text-transform:uppercase;vertical-align:middle;box-sizing:border-box;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.mdc-button--theme-dark,.mdc-theme--dark .mdc-button{color:#fff;color:var(--mdc-theme-text-primary-on-dark,#fff)}.mdc-button::before{position:absolute;top:0;left:0;width:100%;height:100%;transition:opacity 120ms 0s cubic-bezier(.4,0,1,1);border-radius:inherit;background:currentColor;content:"";opacity:0}.mdc-button:focus::before{transition:opacity 120ms 0s cubic-bezier(0,0,.2,1);opacity:.12}.mdc-button:active::before{transition:opacity 120ms 0s cubic-bezier(0,0,.2,1);opacity:.18}.mdc-button:focus:active::before{transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdc-button:active{outline:0}.mdc-button:hover{cursor:pointer}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button--dense{height:32px;font-size:.8125rem;line-height:32px}.mdc-button--raised{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);will-change:box-shadow;min-width:88px}.mdc-button--raised:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mdc-button--theme-dark .mdc-button--raised,.mdc-theme--dark .mdc-button--raised{background-color:#009688;background-color:var(--mdc-theme-primary,#009688)}.mdc-button--theme-dark .mdc-button--raised::before,.mdc-theme--dark .mdc-button--raised::before{color:#000}.mdc-button--primary{color:#009688;color:var(--mdc-theme-primary,#009688)}.mdc-button--theme-dark .mdc-button--primary,.mdc-theme--dark .mdc-button--primary{color:#009688;color:var(--mdc-theme-primary,#009688)}.mdc-button--primary.mdc-button--raised{background-color:#009688;background-color:var(--mdc-theme-primary,#009688);color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff)}.mdc-button--primary.mdc-button--raised::before{color:#000}.mdc-button--accent{color:#ffab40;color:var(--mdc-theme-accent,#ffab40)}.mdc-button--theme-dark .mdc-button--accent,.mdc-theme--dark .mdc-button--accent{color:#ffab40;color:var(--mdc-theme-accent,#ffab40)}.mdc-button--accent.mdc-button--raised{background-color:#ffab40;background-color:var(--mdc-theme-accent,#ffab40);color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-accent,rgba(0,0,0,.87))}.mdc-button--accent.mdc-button--raised::before{color:#000}.mdc-button--compact{padding:0 8px}.mdc-button:disabled,fieldset:disabled .mdc-button{color:rgba(0,0,0,.26);cursor:default;pointer-events:none}.mdc-button--theme-dark .mdc-button:disabled,.mdc-button--theme-dark fieldset:disabled .mdc-button,.mdc-theme--dark .mdc-button:disabled,.mdc-theme--dark fieldset:disabled .mdc-button{color:rgba(255,255,255,.3)}.mdc-button--raised:disabled,fieldset:disabled .mdc-button--raised{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);background-color:rgba(0,0,0,.12);pointer-events:none}.mdc-button--theme-dark .mdc-button--raised:disabled,.mdc-button--theme-dark fieldset:disabled .mdc-button--raised,.mdc-theme--dark .mdc-button--raised:disabled,.mdc-theme--dark fieldset:disabled .mdc-button--raised{background-color:rgba(255,255,255,.12)}.header{display:flex;height:80px;background:#009688;color:#fff;justify-content:center;align-items:center;flex-shrink:0;z-index:2;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.header-title{text-decoration:none;color:#fff;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:2.125rem;font-weight:400;letter-spacing:normal;line-height:2.5rem;margin:-.5rem 0 4rem -.07em;font-weight:700}.header-title:hover,.header-title:visited{color:#fff}.post{background:#fff;padding:48px 24px;margin:0 auto;color:rgba(0,0,0,.87);width:100%;max-width:45rem;box-sizing:border-box}.post-title{display:block;color:#009688;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.5rem;font-weight:400;letter-spacing:normal;line-height:2rem;margin:-.5rem 0 1rem -.06em;font-weight:700;margin-bottom:0}.post-meta{display:block;color:#009688;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:.04em;line-height:1.5rem;margin-bottom:16px}.post-tags{display:inline-block;flex-grow:1;font-family:'Roboto Mono',monospace;letter-spacing:normal}.post-image{max-width:100%;margin:0 auto}.post-image>img{display:block}.post-content{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:400;letter-spacing:.04em;line-height:1.25rem;font-size:1rem;letter-spacing:normal}.post-content h1{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.5rem;font-weight:400;letter-spacing:normal;line-height:2rem}.post-content h2{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:.02em;line-height:2rem;margin-top:2rem}.post-content h3{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:.02em;line-height:2rem;font-size:1rem;color:rgba(0,0,0,.7)}.post-content h4{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:.04em;line-height:1.5rem;font-size:1rem;letter-spacing:normal}.post-content a{color:#00bfa5}.post-content a:hover,.post-content a:visited{color:#00bfa5}.post-content pre{border-radius:2px;margin:0;padding:16px;font-size:.9375rem;font-style:normal;font-weight:400;letter-spacing:normal;line-height:normal;font-family:'Roboto Mono',monospace;overflow-x:auto}.post-content pre+pre{margin-top:16px}.post-content code{font-size:.9375rem;color:#0d47a1;font-family:'Roboto Mono',monospace}.post-content strong{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:500;letter-spacing:.04em;line-height:1.5rem;font-size:1rem;letter-spacing:normal}.post-content figure{max-width:100%;box-sizing:border-box;margin:0}.post-content figcaption{text-align:center;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.75rem;font-weight:400;letter-spacing:.08em;line-height:1.25rem}.post-content blockquote{margin:2em 2.5em 3em 2.5em}.post-content table{margin:2rem 0;border-collapse:collapse;text-align:center}.post-content table td,.post-content table th{padding:8px;border:1px solid #ddd}.post-content .overflow-x{overflow-x:auto}.home{padding:24px 0;box-sizing:border-box}.home-post-list{box-sizing:border-box;list-style:none;padding:0 8px;margin:0 auto 0 auto;width:100%;max-width:45rem}.home-post-entry{background:#fff;padding:16px;box-sizing:border-box;width:100%;border-radius:2px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:400;letter-spacing:.04em;line-height:1.25rem}.home-post-entry+.home-post-entry{margin-top:16px}.home-post-title{display:inline;padding-right:4px;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.5rem;font-weight:400;letter-spacing:normal;line-height:2rem;margin:-.5rem 0 1rem -.06em;font-weight:700}.home-post-title>a{text-decoration:none;color:#009688}.home-post-title>a:hover,.home-post-title>a:visited{color:#009688}.home-post-meta{display:inline-block;margin-bottom:0}.home-post-excerpt{margin:8px 0 0 0;color:rgba(0,0,0,.87);font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;font-weight:400;letter-spacing:.04em;line-height:1.25rem;font-size:1rem;letter-spacing:normal}.home-post-bottom{display:flex;flex-flow:row;padding-top:16px}.home-pagination{display:flex;flex-flow:row nowrap;padding:16px 8px;box-sizing:border-box;margin:0 auto;width:100%;max-width:45rem}.home-page-previous{margin-right:auto}.home-page-next{margin-left:auto}.footer{display:flex;flex-flow:column nowrap;width:100%;background-color:#009688;color:#fff;padding:16px;box-sizing:border-box;flex-shrink:0;z-index:2;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.footer-contents{display:flex;position:relative;flex-flow:row nowrap;justify-content:center;align-items:center;margin:0 auto 0 auto;flex-shrink:0;box-sizing:border-box;padding:0 24px;width:100%;max-width:45rem}@media (max-width:600px){.footer-contents{flex-wrap:wrap;padding:0}}.footer-avatar{border-radius:10%;width:100px;height:100px;background:#000;flex-grow:0;flex-shrink:0;margin-right:16px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.footer-text{flex-grow:1;flex-shrink:1;padding:16px;width:50%}.footer-heading{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:.02em;line-height:2rem;margin:-.5rem 0 1rem -.05em;margin-bottom:8px}.footer-description{margin:0}.footer-icons{display:block;flex-shrink:0}.footer-icons-row{display:block;flex-shrink:0}@media (max-width:600px){.footer-icons-row{display:inline-block}}.footer-bubble{display:inline-block;border-radius:50%;height:40px;width:40px;flex-shrink:0;margin:2px;background-repeat:no-repeat;background-size:contain;background-position:center}.footer-twitter{background-image:url(/assets/images/twitter.svg)}.footer-github{border-radius:0;background-image:url(/assets/images/github.svg)}.footer-email{background-image:url(/assets/images/email.svg)}.footer-feed{background-image:url(/assets/images/feed.svg)}.footer-bottom{display:flex;position:relative;justify-content:center;margin:8px auto 0 auto;flex-shrink:0;width:100%;max-width:45rem}.footer-bottom::before{display:block;position:absolute;top:50%;width:100%;height:1px;background:rgba(255,255,255,.17);content:''}.footer-copyright{display:inline-block;text-align:center;background:#009688;z-index:2;padding:0 8px;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.75rem;font-weight:400;letter-spacing:.08em;line-height:1.25rem}.footer-copyright a{color:#fff;text-decoration:none;font-weight:700}.footer-copyright a:hover,.footer-copyright a:visited{color:#fff}.post-content pre{background:#f5f5f5}.post-content pre code{color:rgba(0,0,0,.87)}.post-content pre code .comment{color:#616161}.post-content pre code .comment .markup.link{color:#616161}.post-content pre code .entity.name.type{color:#3e2723}.post-content pre code .entity.other.inherited-class{color:#1b5e20}.post-content pre code .keyword{color:#4a148c}.post-content pre code .keyword.control{color:#4a148c}.post-content pre code .keyword.operator{color:rgba(0,0,0,.87)}.post-content pre code .keyword.other.special-method{color:#0d47a1}.post-content pre code .keyword.other.unit{color:#e65100}.post-content pre code .storage{color:#4a148c}.post-content pre code .constant{color:#e65100}.post-content pre code .constant.character.escape{color:#006064}.post-content pre code .constant.numeric{color:#e65100}.post-content pre code .constant.other.color{color:#006064}.post-content pre code .constant.other.symbol{color:#1b5e20}.post-content pre code .variable{color:#b71c1c}.post-content pre code .variable.interpolation{color:#3e2723}.post-content pre code .variable.parameter.function{color:rgba(0,0,0,.87)}.post-content pre code .invalid.illegal{background-color:#b71c1c;color:#f5f5f5}.post-content pre code .string{color:#1b5e20}.post-content pre code .string.regexp{color:#006064}.post-content pre code .string.regexp .source.ruby.embedded{color:#3e2723}.post-content pre code .string.other.link{color:#b71c1c}.post-content pre code .punctuation.definition.array,.post-content pre code .punctuation.definition.parameters{color:rgba(0,0,0,.87)}.post-content pre code .punctuation.definition.heading,.post-content pre code .punctuation.definition.identity{color:#0d47a1}.post-content pre code .punctuation.definition.bold{color:#3e2723;font-weight:700}.post-content pre code .punctuation.definition.italic{color:#4a148c;font-style:italic}.post-content pre code .punctuation.section.embedded{color:#3e2723}.post-content pre code .punctuation.section.class,.post-content pre code .punctuation.section.inner-class,.post-content pre code .punctuation.section.method{color:rgba(0,0,0,.87)}.post-content pre code .support.class{color:#3e2723}.post-content pre code .support.function{color:#006064}.post-content pre code .support.function.any-method{color:#0d47a1}.post-content pre code .entity.name.function{color:#0d47a1}.post-content pre code .entity.name.class,.post-content pre code .entity.name.type.class{color:#3e2723}.post-content pre code .entity.name.section{color:#0d47a1}.post-content pre code .entity.name.tag{color:#b71c1c}.post-content pre code .entity.other.attribute-name{color:#e65100}.post-content pre code .entity.other.attribute-name.id{color:#0d47a1}.post-content pre code .meta.class{color:#3e2723}.post-content pre code .meta.class.body{color:rgba(0,0,0,.87)}.post-content pre code .meta.link{color:#e65100}.post-content pre code .meta.method,.post-content pre code .meta.method-call{color:rgba(0,0,0,.87)}.post-content pre code .meta.require{color:#0d47a1}.post-content pre code .meta.selector{color:#4a148c}.post-content pre code .meta.separator{background-color:#373b41;color:rgba(0,0,0,.87)}.post-content pre code .meta.tag{color:rgba(0,0,0,.87)}.post-content pre code .none{color:rgba(0,0,0,.87)}.post-content pre code .markup.bold{color:#e65100;font-weight:700}.post-content pre code .markup.changed{color:#4a148c}.post-content pre code .markup.deleted{color:#b71c1c}.post-content pre code .markup.italic{color:#4a148c;font-style:italic}.post-content pre code .markup.heading{color:#b71c1c}.post-content pre code .markup.heading .punctuation.definition.heading{color:#0d47a1}.post-content pre code .markup.link{color:#0d47a1}.post-content pre code .markup.inserted{color:#1b5e20}.post-content pre code .markup.quote{color:#e65100}.post-content pre code .markup.raw{color:#1b5e20}.post-content pre code .source.gfm .markup{-webkit-font-smoothing:auto}.post-content pre code .source.gfm .link .entity{color:#006064}.aspect-ratio{--aspect-ratio-w:1;--aspect-ratio-h:1;position:relative}.aspect-ratio>:first-child{width:100%}@supports (--custom-props:true){.aspect-ratio::before{display:block;padding-top:calc(var(--aspect-ratio-h,1)/ var(--aspect-ratio-w,1) * 100%);content:""}.aspect-ratio>:first-child{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%}}body,html{display:flex;flex-direction:column;margin:0;padding:0;box-sizing:border-box;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:100%}.site-content{flex-grow:1;background:#eceff1}.mdc-button{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-decoration:none}
  </style>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90468985-1', 'auto');
  ga('send', 'pageview');

</script>

  
</head>


  <body>

    <header class="header" role="banner">
<div>
  <a class="header-title" href="/">sgom.es</a>
  <!-- No, I'm not Spanish. I just like short domain names. -->
</div>
</header>


    <main class="site-content" aria-label="Content">
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Material Money - a sample PWA</h1>
    <time class="post-meta" datetime="2017-04-24T18:05:00+01:00" itemprop="datePublished">(2017-04-24)</time>
  </header>

  <div class="post-content" itemprop="articleBody">
    
<p>Over the past while, I&#39;ve been working on a sample Progressive Web App with <a href="https://twitter.com/Mustafa_x">@Mustafa_x</a>, designer extraordinaire and overall incredibly patient man (judging by how long he had to wait for me to finish coding it). Our goal was to make something from scratch, with a strong focus on UX. I took it as a chance to dive deep into a number of web development aspects and rewrite my code a number of times while doing so. Hence the wait. Sorry, Mustafa.</p>
<p>In any case, it&#39;s now been released as <a href="https://material.money">Material Money</a>, and the source code is fully open and <a href="https://github.com/GoogleChrome/sample-currency-converter">available on GitHub</a>!</p>
<figure>
  <div class="aspect-ratio-image post-image"
       style="width: 650px; --aspect-w: 650; --aspect-h: 420;">
    <img src="composed.png" alt="Material Money on a phone">
  </div>
  <figcaption>Material Money on a phone</figcaption>
</figure>





<h2 id="overview">Overview</h2>
<p>So what went into making this PWA? Here&#39;s a few higlights:</p>
<ul>
<li><strong>Vanilla (no frameworks).</strong> I wanted to see what it took to develop a nice-feeling application without using any frameworks or complex runtime libraries. As a single-page application, this was quite doable; it may be harder for larger applications, but I hope to explore that at some point.</li>
<li><strong>Smooth.</strong> The goal is for the app to always hit 60fps. Transitions are CSS-driven with JS orchestration, which works quite well, given that the app is not scripting-heavy, and the main thread is usually free. The app also uses <a href="https://github.com/material-components/material-components-web">Material Components for the web</a> for the UI elements, that have themselves been built with performance in mind. Beyond that, there are a number of interesting tricks in there to speed things up, such as using proxy elements in animations.</li>
<li><strong>All ES2015.</strong> JavaScript is the <em>lingua franca</em> of the web, and I wanted to see how readable I could make my code with ES2015 alone. The code relies heavily in promises, fat arrow functions and string interpolation.</li>
<li><strong>Hybrid pub-sub / model architecture.</strong> I put together a <a href="https://github.com/GoogleChrome/sample-currency-converter/blob/master/scripts/model.js">simple model</a> that I use as a publisher for changes in the application. These changes propagate to JavaScript listeners that are waiting for them, but also to DOM elements that have been hooked up to a particular model entry. It&#39;s simple and definitely could use more work, but it did the job pretty well while avoiding the need for a full runtime templating system.</li>
<li><strong>Lazy-loading for smaller initial payload.</strong> The app inlines a reduced set of styles for rendering the home screen, and lazily loads the rest after that. The JavaScript for other views is also lazily loaded.</li>
<li><strong>Custom build pipeline</strong>, using <a href="http://gulpjs.com/">gulp</a> and a number of great plugins. This allowed me to run <a href="https://babeljs.io/">Babel</a> for transpilation (and minification, with <a href="https://github.com/babel/babili">babili</a>), <a href="https://rollupjs.org/">rollup</a> for module bundling, and <a href="http://postcss.org/">postcss</a> for CSS custom property replacement and minification. More importantly, it allowed me to use all of these tools at exactly the right point in the pipeline, so that I could generate incremental targets for lazy-loading that are still fully processed, transpiled and minified.</li>
</ul>
<h2 id="browser-support">Browser support</h2>
<p>Material Money should work well in any modern browser, as long as either IndexedDB or local storage are supported, and modern CSS features like flexbox and <code>calc()</code> are available and unprefixed. Edge, Firefox, Chrome and Safari should all work well.</p>
<h2 id="lessons-learned">Lessons learned</h2>
<p>I won&#39;t lie: it was challenging making this app and keeping the focus on polish. Very often, the easy path on the web is not the best one, and there&#39;s a significant amount more work involved in doing the right thing.</p>
<p>Here are a few examples, some of which I hope to expand into full blog posts:</p>
<ul>
<li><p>Animation on the web is not straightforward, even if all you&#39;re trying to do is a simple CSS transition; many properties cause repaints on every frame of an animation, or even worse, layout passes, and depending on your DOM and how many pixels are changing, this may cause janking. In fact, pretty much only <code>opacity</code> and <code>transform</code> are guaranteed to produce performant animations across all browsers, without triggering repaints or causing layout recalculations, and even that isn&#39;t the full story (check <a href="https://csstriggers.com/">CSS Triggers</a> for details). Material Money achieves all of its animation effects with just <code>opacity</code> and <code>transform</code>, often with a healthy dose of sleight-of-hand.</p>
</li>
<li><p>Service Workers are hard. If you&#39;re trying to code your own without using a library like <a href="https://github.com/GoogleChrome/sw-toolbox">sw-toolbox</a>, you&#39;re going to run into pain points trying to debug all the possible code paths. <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a> definitely make things easier, but asynchronous code is never straightforward, especially when triggering a particular code path potentially requires a lot of setup. Even then, if you&#39;re not careful, it&#39;s easy to fall into issues with breakage due to different resources being on different versions, loading things from browser cache when you expect a fresh copy from the network, or accidentally stopping users from getting updates due to a bad choice of caching headers. Do your homework, and be prepared for a steep learning curve.</p>
</li>
<li><p>Hand-crafting your critical path CSS involves a far bit of work, but can be a really powerful way to split up an application and reduce how long it takes to get to that first render. If you&#39;re using external CSS, such as a UI library, you might be able to remove a lot of code from your initial payload and in doing so get something on the user&#39;s screen as quickly as possible. The rest you can just lazy-load the rest as needed or when idle. Split your CSS into critical and non-critical, use <code>@import</code> to pull in the external code, and set up your build process to concatenate and minify both separately, later inlining the critical into your HTML.</p>
</li>
</ul>
<h2 id="next-steps">Next steps</h2>
<p>I learned a lot with Material Money, and I&#39;ll definitely be putting out some posts and articles going into the details of the problems I faced and how I chose to solve them. My choices aren&#39;t necessarily the right ones for everyone, but having something that works as a reference may help you find your own path.</p>
<p>Other than that, I&#39;d like to develop the model implementation a bit further while keeping it simple, as well as explore the intricacies of developing a larger-scale application, while keeping things vanilla, fast, and as polished as possible.</p>
<p>I&#39;m sure there are bugs in there, and I&#39;d love your help in finding and squashing them. Even so, I hope that it&#39;s already enough to give you some ideas for your next app! <a href="https://github.com/GoogleChrome/sample-currency-converter">Happy source reading</a>, and <a href="https://github.com/GoogleChrome/sample-currency-converter/issues">get in touch</a> if you have any questions!</p>


  </div>

  Tags:&nbsp;
  <div class="post-tags">
    
      pwa
    
      release
    
  </div>
</article>

    </main>

    <footer class="footer">
  <div class="footer-contents">
    <img class="footer-avatar" src="/assets/images/avatar.jpg" alt="Author's avatar">

    <div class="footer-text">
      <h2 class="footer-heading">Hey there!</h2>
      <p class="footer-description">I’m Sérgio, and I work at Web Developer Relations at Google, helping developers make the web a better place.</p>
    </div>

    <div class="footer-icons">
      <div class="footer-icons-row">
        <a href="https://twitter.com/sergiomdgomes" class="footer-bubble footer-twitter"></a>
        <a href="mailto:mail@sgom.es" class="footer-bubble footer-email"></a>
      </div>
      <div class="footer-icons-row">
        <a href="/feed.xml" class="footer-bubble footer-feed"></a>
        <a href="https://github.com/sgomes" class="footer-bubble footer-github"></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="footer-copyright">Articles under
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons 4.0 Attribution</a>,
    code under <a rel="license" href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>
    (unless otherwise indicated).</div>
  </div>
</footer>


    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(function(err) {
          console.log('Service worker registration failed: ', err);
        });
      }
    </script>

  </body>

</html>
